# 90-vhdattach.conf - production defaults (no placeholders)
hostonly="no"
add_drivers+=" loop ntfs3 dm_mod dm_snapshot "
add_dracutmodules+=" vhdattach "
dracut_log_level="debug"

# Runtime tunables (used inside initramfs)
# UUID of the host partition that contains the VHD file (example value; replace only if different)
HOST_UUID="3A8E66518E66062B"

# Path relative to the root of the host partition where the .vhd file exists
VHD_REL_PATH="/lubuntu.vhd"

# temporary mountpoint inside initramfs (kept simple)
HOST_MOUNTPOINT="/mnt/host_vhd"

# final mountpoint to add to /etc/fstab in the real root
FINAL_MOUNTPOINT="/mnt/host"

# Retry policy: number of attempts and sleep between attempts (seconds)
VHDATTACH_RETRIES=8
VHDATTACH_DELAY=3

# If set to 1, unmount host partition after loop device created.
# Default 0 to allow fstab-overlay detect the host mount.
UNMOUNT_HOST_AFTER_LOOP=0

# fstab options to add to /etc/fstab inside final root
FSTAB_OPTS="defaults,noatime,windows_names,uid=1000,gid=1000"

# Enable plymouth notifications inside initramfs (requires plymouth and related binaries present)
ENABLE_PLYMOUTH_NOTIF=1

compress="zstd"

